#!/bin/bash
while [ "$1" != "" ]; do
    case $1 in
        -t | --target )           shift
                                target=$1
                                ;;
        -r | --source )           shift
                                source=$1
                                ;;
        -w | --web )    web="-w"
                                ;;
        -l | --link )    link="-l"
                                ;;
        * )
                                exit 1
    esac
    shift
done
echo "$source"
if [ -z "$source" ]; then
  source=_target/deps/mathlib/
fi
if [ -n "$target" ]; then
  target="-t $target"
fi
find "$source"src | grep "[.]olean$" | xargs touch
bash "$source"scripts/rm_all.sh
bash "$source"scripts/mk_all.sh
lean --run src/export_json.lean
bash "$source"scripts/rm_all.sh
python3 print_docs.py -r "$source $target"
